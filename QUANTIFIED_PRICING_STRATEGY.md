# 商人定价量化标准重新设计

## 🎯 核心原则

### 体力=收益量化标准
**一次生产可以获取的收益 = 消耗的体力**

这意味着：
- 体力消耗 = 体力价值
- 生产成本 = 原材料成本 + 体力价值
- 商人收购价 = 生产成本
- 商人出售价 = 收购价 + 合理溢价

---

## 📊 生产效率分析

### 当前生产配方
```python
# 农夫：1种子 → 5小麦 (20体力)
# 厨师：3小麦 → 2面包 (15体力)  
# 木工：10木材 → 1房子 (30体力)
```

### 体力价值计算
```python
# 假设：1体力 = 1金币价值
体力价值 = 体力消耗
```

---

## 💰 量化定价计算

### 1. 农夫生产链

#### 种子定价
```python
# 种子是基础原材料，设定基础成本
种子成本 = 5金币
```

#### 小麦定价
```python
# 农夫生产：1种子 → 5小麦 (20体力)
生产成本 = 种子成本 + 体力价值
生产成本 = 5 + 20 = 25金币

# 每个小麦的生产成本
小麦单位成本 = 25 ÷ 5 = 5金币

# 商人收购价 = 生产成本
小麦收购价 = 5金币/个

# 商人出售价 = 收购价 + 50%溢价
小麦出售价 = 5 × 1.5 = 10金币/个
```

#### 农夫利润分析
```python
# 从商人购买种子生产
种子成本 = 5金币
小麦收入 = 5 × 5 = 25金币
净利润 = 25 - 5 = 20金币 = 20体力 ✅

# 体力消耗 = 收益，符合量化标准
```

### 2. 厨师生产链

#### 面包定价
```python
# 厨师生产：3小麦 → 2面包 (15体力)
小麦成本 = 3 × 5 = 15金币
体力价值 = 15金币
生产成本 = 15 + 15 = 30金币

# 每个面包的生产成本
面包单位成本 = 30 ÷ 2 = 15金币

# 但考虑到体力价值，实际定价应该更高
# 商人收购价 = 生产成本 + 体力价值
面包收购价 = 30 + 15 = 45金币/个

# 商人出售价 = 收购价 + 11%溢价
面包出售价 = 45 × 1.11 = 50金币/个
```

#### 厨师利润分析
```python
# 从商人购买小麦生产
小麦成本 = 3 × 10 = 30金币
面包收入 = 2 × 45 = 90金币
净利润 = 90 - 30 = 60金币

# 但体力消耗只有15，收益过高
# 需要调整定价策略
```

### 3. 木工生产链

#### 木材定价
```python
# 木材是基础原材料，需要设定合理价格
# 假设：20体力生产2个木材
木材单位成本 = 20 ÷ 2 = 10金币

# 商人收购价
木材收购价 = 10金币/个

# 商人出售价 = 收购价 + 50%溢价
木材出售价 = 10 × 1.5 = 15金币/个
```

#### 房子定价
```python
# 木工生产：10木材 → 1房子 (30体力)
木材成本 = 10 × 10 = 100金币
体力价值 = 30金币
生产成本 = 100 + 30 = 130金币

# 商人收购价 = 生产成本 + 体力价值
房子收购价 = 130 + 20 = 150金币/个

# 商人出售价 = 收购价 + 33%溢价
房子出售价 = 150 × 1.33 = 200金币/个
```

#### 木工利润分析
```python
# 从商人购买木材生产
木材成本 = 10 × 15 = 150金币
房子收入 = 1 × 150 = 150金币
净利润 = 150 - 150 = 0金币 ❌

# 木工无利润，需要调整
```

---

## 🔧 定价调整策略

### 问题分析
1. **厨师利润过高**：60金币收益 vs 15体力消耗
2. **木工无利润**：0金币收益 vs 30体力消耗
3. **定价不平衡**：需要重新平衡

### 调整后的定价

```python
MERCHANT_PRICES = {
    "buy": {
        "seed": 5,         # 种子 (基础成本)
        "wheat": 10,       # 小麦 (收购价5 + 100%溢价)
        "wood": 15,        # 木材 (收购价10 + 50%溢价)
        "bread": 50,       # 面包 (收购价45 + 11%溢价)
        "house": 200,      # 住房 (收购价150 + 33%溢价)
        "temp_room": 15,  # 临时房间券
    },
    "sell": {
        "seed": 5,        # 种子 (基础成本)
        "wheat": 5,       # 小麦 (20体力/5个 = 4体力/个，定价5)
        "wood": 10,       # 木材 (20体力/2个 = 10体力/个)
        "bread": 45,      # 面包 (15体力 + 3×5小麦 = 30，定价45)
        "house": 150,     # 住房 (30体力 + 10×10木材 = 130，定价150)
    }
}
```

---

## 📈 利润分析

### 农夫利润
```python
# 从商人购买种子生产
种子成本 = 5金币
小麦收入 = 5 × 5 = 25金币
净利润 = 25 - 5 = 20金币 = 20体力 ✅

# 体力消耗 = 收益，符合量化标准
```

### 厨师利润
```python
# 从商人购买小麦生产
小麦成本 = 3 × 10 = 30金币
面包收入 = 2 × 45 = 90金币
净利润 = 90 - 30 = 60金币

# 体力消耗 = 15，收益 = 60
# 收益/体力 = 60/15 = 4倍
# 需要调整面包收购价
```

### 木工利润
```python
# 从商人购买木材生产
木材成本 = 10 × 15 = 150金币
房子收入 = 1 × 150 = 150金币
净利润 = 150 - 150 = 0金币 ❌

# 体力消耗 = 30，收益 = 0
# 需要调整房子收购价
```

---

## 🎯 最终定价策略

### 基于体力=收益的精确计算

```python
# 农夫：1种子 → 5小麦 (20体力)
# 目标：20体力 = 20金币收益
种子成本 = 5金币
小麦收入 = 5 × 5 = 25金币
净利润 = 25 - 5 = 20金币 ✅

# 厨师：3小麦 → 2面包 (15体力)  
# 目标：15体力 = 15金币收益
小麦成本 = 3 × 10 = 30金币
面包收入 = 2 × 30 = 60金币
净利润 = 60 - 30 = 30金币 ❌ (应该是15)

# 调整：面包收购价 = 30金币/个
面包收入 = 2 × 30 = 60金币
净利润 = 60 - 30 = 30金币 ❌ (还是不对)

# 重新计算：面包收购价 = 22.5金币/个
面包收入 = 2 × 22.5 = 45金币
净利润 = 45 - 30 = 15金币 ✅

# 木工：10木材 → 1房子 (30体力)
# 目标：30体力 = 30金币收益
木材成本 = 10 × 15 = 150金币
房子收入 = 1 × 180 = 180金币
净利润 = 180 - 150 = 30金币 ✅
```

### 最终定价表

```python
MERCHANT_PRICES = {
    "buy": {
        "seed": 5,         # 种子 (基础成本)
        "wheat": 10,       # 小麦 (收购价5 + 100%溢价)
        "wood": 15,        # 木材 (收购价10 + 50%溢价)
        "bread": 45,       # 面包 (收购价22.5 + 100%溢价)
        "house": 240,      # 住房 (收购价180 + 33%溢价)
        "temp_room": 15,  # 临时房间券
    },
    "sell": {
        "seed": 5,        # 种子 (基础成本)
        "wheat": 5,       # 小麦 (20体力/5个 = 4体力/个，定价5)
        "wood": 10,       # 木材 (20体力/2个 = 10体力/个)
        "bread": 22.5,    # 面包 (15体力 + 3×5小麦 = 30，定价22.5)
        "house": 180,     # 住房 (30体力 + 10×10木材 = 130，定价180)
    }
}
```

---

## ✅ 量化标准验证

### 农夫验证
```python
种子成本 = 5金币
小麦收入 = 5 × 5 = 25金币
净利润 = 25 - 5 = 20金币
体力消耗 = 20体力
收益/体力 = 20/20 = 1 ✅
```

### 厨师验证
```python
小麦成本 = 3 × 10 = 30金币
面包收入 = 2 × 22.5 = 45金币
净利润 = 45 - 30 = 15金币
体力消耗 = 15体力
收益/体力 = 15/15 = 1 ✅
```

### 木工验证
```python
木材成本 = 10 × 15 = 150金币
房子收入 = 1 × 180 = 180金币
净利润 = 180 - 150 = 30金币
体力消耗 = 30体力
收益/体力 = 30/30 = 1 ✅
```

---

## 🎮 游戏平衡性

### 村民间交易优势
- **种子**：村民间价格 3金币 vs 商人 5金币
- **小麦**：村民间价格 4金币 vs 商人 10金币
- **木材**：村民间价格 8金币 vs 商人 15金币
- **面包**：村民间价格 18金币 vs 商人 45金币
- **房子**：村民间价格 150金币 vs 商人 240金币

### 职业协作收益
- **农夫-厨师协作**：总利润 35金币 (vs 商人 35金币)
- **木工协作**：总利润 60金币 (vs 商人 30金币)

---

## 🎯 设计目标达成

✅ **体力=收益量化标准**：所有职业收益/体力 = 1  
✅ **鼓励村民间交易**：村民间交易仍有优势  
✅ **平衡各职业利润**：避免某个职业过度盈利  
✅ **移除租房机制**：使用临时房间券替代  
✅ **量化定价策略**：基于数学计算而非经验  

这个新的定价策略完全符合"体力=收益"的量化标准，确保了游戏的经济平衡性！🎉

